<div th:fragment="concertForm (concert, theaters, actionUrl, submitLabel)">
	<div style="max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
		<form th:action="@{${actionUrl}}" th:object="${concert}" method="post">
			
			<div style="margin-bottom: 15px;">
				<label for="theater">Theater:</label>
				<select id="theater" th:field="*{theaterId}" required class="searchable-select"
				        style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box;">
					<option value="">--Select Theater--</option>
					<option th:each="t : ${theaters}" th:value="${t.id}"
					        th:text="${t.name + ' (' + t.city.name + ', ' + t.city.country.name + ')'}"></option>
				</select>
			</div>
			
			<div style="margin-bottom: 15px;">
				<label for="type">Concert Type:</label>
				<select id="type" th:field="*{type}">
					<option th:each="type : ${types}"
					        th:value="${type}"
					        th:text="${type}">
					</option>
				</select>
			</div>
			
			<div style="margin-bottom: 15px;">
				<label for="name">Concert Name:</label>
				<input type="text" id="name" th:field="*{name}" required
				       style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box;"/>
			</div>
			
			<div style="margin-bottom: 15px;">
				<label for="date">Date:</label>
				<input type="date" id="date"
				       th:field="*{date}"
				       required
				       style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box;"/>
			</div>
			
			<div style="margin-bottom: 15px;">
				<label for="ticket">Ticket Info:</label>
				<input type="text" id="ticket" th:field="*{ticket}"
				       style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box;"/>
			</div>
			
			<div style="margin-bottom: 15px;">
				<label for="artists">Artists:</label>
				<div class="tag-input-container"
				     style="display:flex; flex-wrap:wrap; gap:5px; border:1px solid #ccc; padding:5px; border-radius:4px;">
					<input type="text" id="artist-input" placeholder="Type artist and press ,"
					       style="border:none; outline:none; flex:1; min-width:150px;"/>
				</div>
				<input type="hidden" id="artists-hidden" name="artists"
				       th:value="${#strings.listJoin(concert.artists, ',')}"/>
			</div>
			
			<!-- Dynamic photo inputs -->
			<div style="margin-bottom: 15px;" class="photo-section">
				<label>Photos:</label>
				<div id="photo-fields">
					<!-- Existing photos -->
					<div th:each="photo, iterStat : ${concert.photos}" class="photo-item existing-photo" style="position: relative; display: inline-block; margin: 5px;">
						<input type="hidden" th:field="*{photoIds[__${iterStat.index}__]}" th:value="${photo.id}"
						       class="photo-id"/>
						<input type="hidden" th:field="*{photoBase64[__${iterStat.index}__]}" th:value="${photo.photo}"
						       class="photo-base64"/>
						<div style="display:flex; align-items:center; gap:8px;">
							<img th:src="${photo.photo}" style="max-width:120px; max-height: 80px; display:block; border-radius:4px;"/>
							<button type="button" class="delete-photo"
							        style="
						                position: absolute;
						                bottom: 4px;
						                right: 4px;
						                background: white;
						                color: red;
						                border: none;
						                border-radius: 50%;
						                width: 24px;
						                height: 24px;
						                cursor: pointer;
						                font-size: 14px;
						                display: flex;
						                align-items: center;
						                justify-content: center;
						            ">âœ–</button>
						</div>
					</div>
				</div>
				<button style="margin-top: 20px" type="button" id="add-photo-btn">+ Add Photo</button>
			</div>
			
			<button type="submit"
			        style="padding: 10px 20px; background-color: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer; width: 100%;"
			        th:text="${submitLabel}">
			</button>
		</form>
	</div>
</div>

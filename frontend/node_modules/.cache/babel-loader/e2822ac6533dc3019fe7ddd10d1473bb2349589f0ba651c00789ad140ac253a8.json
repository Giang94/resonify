{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nhgiang\\\\Documents\\\\personal\\\\resonify\\\\frontend\\\\src\\\\components\\\\MapView\\\\SyncZoom.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useMap, Marker } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function SyncZoom({\n  concerts,\n  setZoomLevel,\n  setMapZoom\n}) {\n  _s();\n  const map = useMap();\n  const [center, setCenter] = useState(null);\n  const [fitted, setFitted] = useState(false); // ✅ prevent repeat fit\n\n  useEffect(() => {\n    if (!concerts || concerts.length === 0) return;\n    const bounds = L.latLngBounds(concerts.map(c => [c.lat, c.lng]));\n    if (!fitted) {\n      // ✅ only fit once when concerts first load\n      map.fitBounds(bounds, {\n        padding: [50, 50]\n      });\n      const boundsCenter = bounds.getCenter();\n      console.log(\"Bounds center:\", boundsCenter);\n      setCenter(boundsCenter);\n      setFitted(true);\n    }\n    const handleZoom = () => {\n      const z = map.getZoom();\n      setMapZoom(z);\n      if (z < 3) setZoomLevel(\"continent\");else if (z < 6) setZoomLevel(\"country\");else if (z < 10) setZoomLevel(\"city\");else setZoomLevel(\"city\");\n    };\n    map.on(\"zoomend\", handleZoom);\n    handleZoom();\n    return () => {\n      map.off(\"zoomend\", handleZoom);\n    };\n  }, [map, concerts, fitted, setZoomLevel, setMapZoom]);\n  return center ? /*#__PURE__*/_jsxDEV(Marker, {\n    position: center\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 19\n  }, this) : null;\n}\n_s(SyncZoom, \"T52kwLSR65MCtcoW+hdg7gUsRFU=\", false, function () {\n  return [useMap];\n});\n_c = SyncZoom;\nvar _c;\n$RefreshReg$(_c, \"SyncZoom\");","map":{"version":3,"names":["useEffect","useState","useMap","Marker","L","jsxDEV","_jsxDEV","SyncZoom","concerts","setZoomLevel","setMapZoom","_s","map","center","setCenter","fitted","setFitted","length","bounds","latLngBounds","c","lat","lng","fitBounds","padding","boundsCenter","getCenter","console","log","handleZoom","z","getZoom","on","off","position","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/nhgiang/Documents/personal/resonify/frontend/src/components/MapView/SyncZoom.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useMap, Marker } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\n\r\nexport function SyncZoom({ concerts, setZoomLevel, setMapZoom }) {\r\n  const map = useMap();\r\n  const [center, setCenter] = useState(null);\r\n  const [fitted, setFitted] = useState(false); // ✅ prevent repeat fit\r\n\r\n  useEffect(() => {\r\n    if (!concerts || concerts.length === 0) return;\r\n\r\n    const bounds = L.latLngBounds(concerts.map(c => [c.lat, c.lng]));\r\n\r\n    if (!fitted) {\r\n      // ✅ only fit once when concerts first load\r\n      map.fitBounds(bounds, { padding: [50, 50] });\r\n\r\n      const boundsCenter = bounds.getCenter();\r\n      console.log(\"Bounds center:\", boundsCenter);\r\n      setCenter(boundsCenter);\r\n      setFitted(true);\r\n    }\r\n\r\n    const handleZoom = () => {\r\n      const z = map.getZoom();\r\n      setMapZoom(z);\r\n\r\n      if (z < 3) setZoomLevel(\"continent\");\r\n      else if (z < 6) setZoomLevel(\"country\");\r\n      else if (z < 10) setZoomLevel(\"city\");\r\n      else setZoomLevel(\"city\");\r\n    };\r\n\r\n    map.on(\"zoomend\", handleZoom);\r\n    handleZoom();\r\n\r\n    return () => {\r\n      map.off(\"zoomend\", handleZoom);\r\n    };\r\n  }, [map, concerts, fitted, setZoomLevel, setMapZoom]);\r\n\r\n  return center ? <Marker position={center} /> : null;\r\n}\r\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,MAAM,EAAEC,MAAM,QAAQ,eAAe;AAC9C,OAAOC,CAAC,MAAM,SAAS;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExB,OAAO,SAASC,QAAQA,CAAC;EAAEC,QAAQ;EAAEC,YAAY;EAAEC;AAAW,CAAC,EAAE;EAAAC,EAAA;EAC/D,MAAMC,GAAG,GAAGV,MAAM,CAAC,CAAC;EACpB,MAAM,CAACW,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACc,MAAM,EAAEC,SAAS,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;;EAE7CD,SAAS,CAAC,MAAM;IACd,IAAI,CAACQ,QAAQ,IAAIA,QAAQ,CAACS,MAAM,KAAK,CAAC,EAAE;IAExC,MAAMC,MAAM,GAAGd,CAAC,CAACe,YAAY,CAACX,QAAQ,CAACI,GAAG,CAACQ,CAAC,IAAI,CAACA,CAAC,CAACC,GAAG,EAAED,CAAC,CAACE,GAAG,CAAC,CAAC,CAAC;IAEhE,IAAI,CAACP,MAAM,EAAE;MACX;MACAH,GAAG,CAACW,SAAS,CAACL,MAAM,EAAE;QAAEM,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE;MAAE,CAAC,CAAC;MAE5C,MAAMC,YAAY,GAAGP,MAAM,CAACQ,SAAS,CAAC,CAAC;MACvCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEH,YAAY,CAAC;MAC3CX,SAAS,CAACW,YAAY,CAAC;MACvBT,SAAS,CAAC,IAAI,CAAC;IACjB;IAEA,MAAMa,UAAU,GAAGA,CAAA,KAAM;MACvB,MAAMC,CAAC,GAAGlB,GAAG,CAACmB,OAAO,CAAC,CAAC;MACvBrB,UAAU,CAACoB,CAAC,CAAC;MAEb,IAAIA,CAAC,GAAG,CAAC,EAAErB,YAAY,CAAC,WAAW,CAAC,CAAC,KAChC,IAAIqB,CAAC,GAAG,CAAC,EAAErB,YAAY,CAAC,SAAS,CAAC,CAAC,KACnC,IAAIqB,CAAC,GAAG,EAAE,EAAErB,YAAY,CAAC,MAAM,CAAC,CAAC,KACjCA,YAAY,CAAC,MAAM,CAAC;IAC3B,CAAC;IAEDG,GAAG,CAACoB,EAAE,CAAC,SAAS,EAAEH,UAAU,CAAC;IAC7BA,UAAU,CAAC,CAAC;IAEZ,OAAO,MAAM;MACXjB,GAAG,CAACqB,GAAG,CAAC,SAAS,EAAEJ,UAAU,CAAC;IAChC,CAAC;EACH,CAAC,EAAE,CAACjB,GAAG,EAAEJ,QAAQ,EAAEO,MAAM,EAAEN,YAAY,EAAEC,UAAU,CAAC,CAAC;EAErD,OAAOG,MAAM,gBAAGP,OAAA,CAACH,MAAM;IAAC+B,QAAQ,EAAErB;EAAO;IAAAsB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC,GAAG,IAAI;AACrD;AAAC3B,EAAA,CAvCeJ,QAAQ;EAAA,QACVL,MAAM;AAAA;AAAAqC,EAAA,GADJhC,QAAQ;AAAA,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
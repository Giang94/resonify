{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// SyncZoom.js\nimport { useEffect, useRef } from \"react\";\nimport { useMap } from \"react-leaflet\";\nimport L from \"leaflet\";\nexport function SyncZoom({\n  setZoomLevel,\n  setMapZoom\n}) {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    const handleZoom = () => {\n      const z = map.getZoom();\n      setMapZoom(z);\n      if (z < 3) setZoomLevel(\"continent\");else if (z < 6) setZoomLevel(\"country\");else if (z < 10) setZoomLevel(\"city\");else setZoomLevel(\"city\");\n    };\n    map.on(\"zoomend\", handleZoom);\n    handleZoom();\n    return () => {\n      map.off(\"zoomend\", handleZoom);\n    };\n  }, [map, setZoomLevel, setMapZoom]);\n  return null;\n}\n_s(SyncZoom, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = SyncZoom;\nexport function FitToDataBounds({\n  concerts\n}) {\n  _s2();\n  const map = useMap();\n  const fittedOnce = useRef(false);\n  useEffect(() => {\n    if (!fittedOnce.current && concerts && concerts.length > 0) {\n      const bounds = L.latLngBounds(concerts.map(c => [c.lat, c.lng]));\n      map.fitBounds(bounds, {\n        padding: [50, 50]\n      });\n      fittedOnce.current = true; // ✅ only fit the first time\n    }\n  }, [concerts, map]);\n  return null;\n}\n_s2(FitToDataBounds, \"PPBN30nrjUaIAAuvajMMiRiQRVo=\", false, function () {\n  return [useMap];\n});\n_c2 = FitToDataBounds;\nexport function DebugBounds({\n  concerts\n}) {\n  _s3();\n  const map = useMap();\n  useEffect(() => {\n    if (!map) return;\n    const bounds = L.latLngBounds(concerts.map(m => [m.lat, m.lng]));\n\n    // Safety check — log the bounds\n    console.log(\"fitBounds ->\", bounds);\n\n    // Force Leaflet to respect padding & not over-zoom\n    map.fitBounds(bounds, {\n      padding: [50, 50],\n      // keeps bounds away from edges\n      maxZoom: 8 // prevents zooming into one block\n    });\n  }, [map, concerts]);\n  return null;\n}\n_s3(DebugBounds, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c3 = DebugBounds;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"SyncZoom\");\n$RefreshReg$(_c2, \"FitToDataBounds\");\n$RefreshReg$(_c3, \"DebugBounds\");","map":{"version":3,"names":["useEffect","useRef","useMap","L","SyncZoom","setZoomLevel","setMapZoom","_s","map","handleZoom","z","getZoom","on","off","_c","FitToDataBounds","concerts","_s2","fittedOnce","current","length","bounds","latLngBounds","c","lat","lng","fitBounds","padding","_c2","DebugBounds","_s3","m","console","log","maxZoom","_c3","$RefreshReg$"],"sources":["C:/Users/nhgiang/Documents/personal/resonify/frontend/src/components/MapView/SyncZoom.js"],"sourcesContent":["// SyncZoom.js\r\nimport { useEffect, useRef } from \"react\";\r\nimport { useMap } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\n\r\nexport function SyncZoom({ setZoomLevel, setMapZoom }) {\r\n    const map = useMap();\r\n\r\n    useEffect(() => {\r\n        const handleZoom = () => {\r\n            const z = map.getZoom();\r\n            setMapZoom(z);\r\n\r\n            if (z < 3) setZoomLevel(\"continent\");\r\n            else if (z < 6) setZoomLevel(\"country\");\r\n            else if (z < 10) setZoomLevel(\"city\");\r\n            else setZoomLevel(\"city\");\r\n        };\r\n\r\n        map.on(\"zoomend\", handleZoom);\r\n        handleZoom();\r\n\r\n        return () => {\r\n            map.off(\"zoomend\", handleZoom);\r\n        };\r\n    }, [map, setZoomLevel, setMapZoom]);\r\n\r\n    return null;\r\n}\r\n\r\nexport function FitToDataBounds({ concerts }) {\r\n    const map = useMap();\r\n    const fittedOnce = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if (!fittedOnce.current && concerts && concerts.length > 0) {\r\n            const bounds = L.latLngBounds(concerts.map(c => [c.lat, c.lng]));\r\n            map.fitBounds(bounds, { padding: [50, 50] });\r\n            fittedOnce.current = true; // ✅ only fit the first time\r\n        }\r\n    }, [concerts, map]);\r\n\r\n    return null;\r\n}\r\n\r\nexport function DebugBounds({ concerts }) {\r\n    const map = useMap();\r\n\r\n    useEffect(() => {\r\n        if (!map) return;\r\n\r\n        const bounds = L.latLngBounds(concerts.map(m => [m.lat, m.lng]));\r\n\r\n        // Safety check — log the bounds\r\n        console.log(\"fitBounds ->\", bounds);\r\n\r\n        // Force Leaflet to respect padding & not over-zoom\r\n        map.fitBounds(bounds, {\r\n            padding: [50, 50],   // keeps bounds away from edges\r\n            maxZoom: 8           // prevents zooming into one block\r\n        });\r\n\r\n    }, [map, concerts]);\r\n\r\n    return null;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}